<div class="product-list-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <h3>Categories</h3>
    <ul class="category-list">
      <li 
        [class.active]="selectedCategoryId === null"
        (click)="filterByCategory(null)"
      >
        All Products
      </li>
      @for (category of categories; track category.id) {
        <li 
          [class.active]="selectedCategoryId === category.id"
          (click)="filterByCategory(category.id!)"
        >
          {{ category.name }}
        </li>
      }
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="products-main">
    <div class="products-header">
      <h2>Products</h2>
      <p class="products-count">{{ filteredProducts.length }} products found</p>
    </div>
    
    @if (filteredProducts.length === 0) {
      <div class="no-products">
        <i class="fas fa-box-open"></i>
        <p>No products found</p>
      </div>
    } @else {
      <div class="products-grid">
        @for (product of filteredProducts; track product.id) {
          <div class="product-card">
            <div class="product-image-container">
              <img [src]="product.imageUrl" [alt]="product.name" class="product-image">
              @if (product.stockQuantity === 0) {
                <div class="out-of-stock-overlay">Out of Stock</div>
              }
            </div>
            <div class="product-info">
              <h3>{{ product.name }}</h3>
              <p class="product-brand">{{ product.brand }}</p>
              <p class="product-description">{{ product.description }}</p>
              <p class="product-price">${{ product.price.toFixed(2) }}</p>
              <p class="product-stock">
                @if (product.stockQuantity > 0) {
                  <span class="in-stock">
                    <i class="fas fa-check-circle"></i> In Stock ({{ product.stockQuantity }})
                  </span>
                } @else {
                  <span class="out-of-stock">
                    <i class="fas fa-times-circle"></i> Out of Stock
                  </span>
                }
              </p>
              <div class="product-actions">
                <a [routerLink]="['/products', product.id]" class="btn btn-view">
                  <i class="fas fa-eye"></i> View Details
                </a>
                <button 
                  (click)="addToCart(product)" 
                  class="btn btn-cart"
                  [disabled]="product.stockQuantity === 0"
                >
                  <i class="fas fa-shopping-cart"></i> Add to Cart
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </main>
</div>