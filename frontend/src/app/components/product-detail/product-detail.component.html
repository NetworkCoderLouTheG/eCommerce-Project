<div class="product-detail-container">
  @if (product) {
    <div class="breadcrumb">
      <a routerLink="/">Home</a> / 
      <a routerLink="/products">Products</a> / 
      <span>{{ product.name }}</span>
    </div>

    <div class="product-detail">
      <!-- Product Image -->
      <div class="product-image-section">
        <img [src]="product.imageUrl" [alt]="product.name" class="product-image">
      </div>

      <!-- Product Info -->
      <div class="product-info-section">
        <h1>{{ product.name }}</h1>
        <p class="product-brand">by {{ product.brand }}</p>
        
        <div class="product-price-section">
          <span class="product-price">${{ product.price.toFixed(2) }}</span>
          @if (product.stockQuantity > 0) {
            <span class="stock-status in-stock">
              <i class="fas fa-check-circle"></i> In Stock
            </span>
          } @else {
            <span class="stock-status out-of-stock">
              <i class="fas fa-times-circle"></i> Out of Stock
            </span>
          }
        </div>

        <p class="product-description">{{ product.description }}</p>

        <!-- Quantity Selector -->
        @if (product.stockQuantity > 0) {
          <div class="quantity-section">
            <label>Quantity:</label>
            <div class="quantity-controls">
              <button (click)="decrementQuantity()" class="qty-btn">-</button>
              <input type="number" [(ngModel)]="quantity" min="1" [max]="product.stockQuantity" class="qty-input" readonly>
              <button (click)="incrementQuantity()" class="qty-btn">+</button>
            </div>
            <span class="stock-info">{{ product.stockQuantity }} available</span>
          </div>

          <button (click)="addToCart()" class="btn btn-add-cart">
            <i class="fas fa-shopping-cart"></i> Add to Cart
          </button>
        } @else {
          <button class="btn btn-disabled" disabled>
            Out of Stock
          </button>
        }

        <!-- Specifications -->
        @if (getSpecKeys().length > 0) {
          <div class="specifications">
            <h3>Specifications</h3>
            <table class="spec-table">
              @for (key of getSpecKeys(); track key) {
                <tr>
                  <td class="spec-label">{{ key | titlecase }}:</td>
                  <td class="spec-value">{{ specifications[key] }}</td>
                </tr>
              }
            </table>
          </div>
        }

        <!-- Category Info -->
        <div class="category-info">
          <strong>Category:</strong> 
          <a [routerLink]="['/products']" [queryParams]="{category: product.category.id}">
            {{ product.category.name }}
          </a>
        </div>
      </div>
    </div>
  } @else {
    <div class="loading">
      <i class="fas fa-spinner fa-spin"></i> Loading...
    </div>
  }
</div>
